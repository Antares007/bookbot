!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class r{constructor(e){this.dispose=e}dispose(){this.dispose()}}function o(e){return new r(e)}new r(()=>{});const s=(e,t=0)=>{const n=setTimeout(e,t);return o(()=>clearTimeout(n))};var i=[],c=-1/0,a=1/0,u=null;const f=()=>{if(c!==a){u&&u.dispose(),u=s(p,0);var e=(()=>Date.now())();c>e&&(e=c),a<e&&(e=a),c=a=e}return c},l=(e,t=0)=>{const n=t<0?f():f()+t,r=d(n,i);var s=i[r];-1!==r&&s[0]===n||(s=[n,[]],i.splice(r+1,0,s));const c=s[1].push(e)-1;return o(()=>{s[1][c]=null})};function p(){for(c=a;;){const n=d(c,i);if(-1===n)break;const r=i;i=n===i.length-1?[]:i.slice(n+1);for(var e=0;e<=n;e++){const[n,o]=r[e];for(var t of o)t&&t(n)}}0===i.length?(a=1/0,u=null):(a=i[0][0],u=s(p,a-c))}function d(e,t){for(var n=0,r=t.length;;){if(!(n<r))return n-1;{const o=0|~~((n+r)/2);if(t[o][0]>e){r=o;continue}n=o+1}}throw new Error("never")}class v{}const h=new v;class m{constructor(e){this.value=e}}const g=e=>new m(e);class y{constructor(e){this.f=e}run(e){return x(e,this)}merge(e){return k(this,e)}startWith(e){return M(e,this)}tryCatch(){return j(this)}map(e){return C(e,this)}tap(e){return N(e,this)}flatMap(e){return O(e,this)}flatMapLatest(e){return E(e,this)}filter(e){return S(e,this)}filter2(e){return _(e,this)}take(e){return z(e,this)}skip(e){return P(e,this)}scan(e,t){return T(e,t,this)}multicast(){return B(this)}skipEquals(){return L(this)}skipUntil(e){return A(e,this)}}function b(e){return new y(e)}const w=(e,t=0)=>b(n=>{n(l(()=>{n(g(e)),n(l(()=>n(h),0))},t))}),x=(e,t)=>{var n=[],s=!1;const i=o(()=>{if(!s)for(var e of(s=!0,n))e.dispose()});var c=f();return t.f(function(t){t instanceof m?e(t):t instanceof r?s?t.dispose():c===f()?n.push(t):(c=f(),n=[t]):(t instanceof Error?i.dispose():n=[],e(t))}),i},E=(e,t)=>b(n=>{var r=null,s=x(function(t){t instanceof m?(r&&r.dispose(),r=x(function(e){e instanceof m?n(e):e instanceof v?(r=null,null==s&&n(h)):n(e)},e(t.value))):t instanceof v?(s=null,null==r&&n(h)):n(t)},t);n(o(()=>{s&&s.dispose(),r&&r.dispose()}))}),O=(e,t)=>b(n=>{const r=new Map;n(o(()=>{for(var e of r.entries())e[1].dispose()}));var s=0;const i=s++;r.set(i,x(t=>{if(t instanceof m){const o=s++;r.set(o,x(e=>{e instanceof m?n(e):e instanceof v?(r.delete(o),0===r.size&&n(e)):n(e)},e(t.value)))}else t instanceof v?(r.delete(i),0===r.size&&n(t)):n(t)},t))}),k=(e,t)=>b(n=>{var r=2;const s=x(c,e),i=x(c,t);function c(e){e instanceof v?0==--r&&n(h):n(e)}n(o(()=>{s.dispose(),i.dispose()}))}),M=(e,t)=>b(n=>n(l(()=>n(g(e)),n(x(n,t))))),j=e=>b(t=>e.f(function(e){if(e instanceof Error)t(e);else try{t(e)}catch(e){t(e)}})),C=(e,t)=>b(n=>t.f(function(t){n(t instanceof m?g(e(t.value)):t)})),N=(e,t)=>b(n=>t.f(function(t){t instanceof m?(e(t.value),n(t)):n(t)})),S=(e,t)=>b(n=>t.f(function(t){t instanceof m?e(t.value)&&n(t):n(t)})),_=(e,t)=>b(n=>t.f(function(t){if(t instanceof m){const r=e(t.value);r&&n(g(r))}else n(t)})),z=(e,t)=>e<=0?(()=>b(e=>e(l(()=>e(h)))))():b(n=>{var r=0;const o=x(function(t){t instanceof m?(n(t),++r===e&&(o.dispose(),n(h))):n(t)},t);n(o)}),P=(e,t)=>e<=0?t:b(n=>{var r=0;const o=x(function(t){if(t instanceof m){if(r++<e)return;n(t)}else n(t)},t);n(o)}),T=(e,t,n)=>b(r=>{r(l(o=>{var s=t;r(g(s)),r(x(function(t){r(t instanceof m?g(s=e(s,t.value)):t)},n))}))}),B=e=>{const t=[];var n;return b(r=>{null==n&&(n=x(e=>{for(var n of t)n(e)},e)),t.push(r),r(o(()=>{var e=t.indexOf(r);e<0||(t.splice(e,1),0===t.length&&n&&(n=n.dispose()))}))})},L=e=>{var t;return b(n=>{e.f(e=>{if(e instanceof m){if(t===e.value)return;t=e.value,n(e)}else n(e)})})},A=(e,t)=>b(n=>{var r,o=!0;n(r=x(e=>{e instanceof m?(o=!1,r.dispose()):e instanceof Error&&n(e)},e)),n(x(e=>{e instanceof m&&o||n(e)},t))});class U{constructor(e){this.ets=e}event(e){return this.ets.flatMap(t=>b(n=>{const r=e=>n(g(e));t.addEventListener(e,r),n(o(()=>t.removeEventListener(e,r)))}))}click(){return this.event("click")}input(){return this.event("input")}}function q(e,t){return t instanceof y?t.map(e):e(t)}const D=e=>({type:"reducer",r:e}),I=e=>({type:"patch",p:e}),J=(e,t)=>({type:"element",tag:e.toUpperCase(),pith:t}),W=e=>({type:"text",tag:"#text",value:e});function $(e,t){return"element"!==t.type?w(I(e=>{e.textContent=t.value})):b(n=>{const{start:r,stop:s}=function(e){const t=new Map;return e(o(()=>{for(var e of t.values())e.dispose()})),{start(n){t.set(n,x(r=>{r instanceof m?e(r):r instanceof v?(t.delete(n),0===t.size&&e(r)):e(r)},n))},stop(n){const r=t.get(n);r&&(t.delete(n),r.dispose(),0===t.size&&e(h))}}}(n),i=[],c=[],a=[],u=[],f=[];var p=e=>{};const d=b(e=>{p=e}).multicast();var E;t.pith({node:e=>{i.push(e)},patch:e=>{e instanceof y?c.push(e):a.push(e)},reduce:e=>{e instanceof y?u.push(e):f.push(e)}},{ref:d,states:e}),r(function(e){return b(t=>{const n=new Map,r=new Array(e.length),s=[];t(o(()=>{for(var e of n.values())e.dispose()}));for(let o=0,i=e.length;o<i;o++){const i=e[o];i instanceof y?(s.push(o),n.set(o,x(e=>{if(e instanceof m)if(0===s.length)t(g({type:"update",v:e.value,index:o}));else{r[o]=e.value;const n=s.indexOf(o);-1!==n&&s.splice(n,1),0===s.length&&t(g({type:"init",v:r}))}else e instanceof v?(n.delete(o),0===n.size&&t(e)):t(e)},i))):r[o]=i}0===s.length&&t(l(()=>{t(g({type:"init",v:r})),t(l(()=>t(h)))}))})}(i).map(t=>{if("init"===t.type){const{v:s}=t;E=new Array(s.length);for(var n=0,o=s.length;n<o;n++)r(E[n]=F(e,s[n],n));for(n=0,o=c.length;n<o;n++)r(c[n].map(e=>I(e)));f.length>0&&r(w(D(e=>{for(var t=e,n=0,r=f.length;n<r;n++)t=f[n](t);return t})));for(n=0,o=u.length;n<o;n++)r(u[n].map(e=>D(e)));return I(e=>{!function(e,t){const n=e.length,r=t.childNodes;for(var o,s=0;s<n;s++){const n=e[s];o=null;for(var i=s,c=r.length;i<c&&!(o=r[s].nodeName===n.tag?r[s]:null);i++);null==o?t.insertBefore(G(n),r[s]):i!==s&&t.insertBefore(o,r[s])}for(var i=r.length-1;i>=n;i--)t.removeChild(r[i])}(s,e);for(var t=0,n=a.length;t<n;t++)a[t](e);p(g(e))})}{const{index:n,v:o}=t,i=E[n];return r(E[n]=F(e,o,n)),s(i),I(function(e,t){return n=>{const r=n.childNodes[t];n.insertBefore(G(e),r),n.removeChild(r)}}(o,n))}}))})}function F(e,t,n){return $(e,t).map(e=>"patch"===e.type?I(t=>{e.p(t.childNodes[n])}):e)}function G(e){return"element"===e.type?document.createElement(e.tag):"text"===e.type?document.createTextNode(e.value):document.createComment(e.value)}function H(e,t){return n=>"element"===n.type?J(n.tag,(r,o)=>{n.pith({node:n=>r.node(q(H(e,t),n)),patch:r.patch,reduce:n=>r.reduce(q(n=>r=>({...r,[e]:n(r[e]||t)}),n))},{ref:o.ref,states:o.states.map(n=>"object"==typeof n[e]?n[e]:t)})}):n}const K=e=>J("div",(t,n)=>{t.node(J("button",(t,n)=>{const r=new U(n.ref);t.reduce(r.click().map(e=>e=>({...e,n:e.n+1}))),t.node(W("+")),e>0&&t.node(H("+",{n:0})(K(e-1)))})),t.node(J("button",(t,n)=>{const r=new U(n.ref);t.reduce(r.click().map(e=>e=>({...e,n:e.n-1}))),t.node(W("-")),e>0&&t.node(H("-",{n:0})(K(e-1)))})),t.node(n.states.map(e=>W(e.n+""))),t.node(n.states.map(e=>(e=>({type:"comment",tag:"#comment",value:e}))(` ${e.n} `)))}),Q=document.getElementById("root-node");if(!Q)throw new Error("cant find root-node");var R,V,X;(R=Q,V={n:0,b:!0},X=K(2),b(e=>{var t=V;const n=[],r=b(e=>{n.push(e),e(o(()=>{const t=n.indexOf(e);t>=0&&n.splice(t,1)})),e(l(()=>{e(g(t))}))});e($(r,X).filter2(e=>"patch"===e.type?e.p(R):e).run(r=>{if(r instanceof m){t=r.value.r(t);const o=g(t);e(o),n.forEach(e=>e(l(()=>e(o))))}else e(r)}))})).take(30).run(e=>{e instanceof m?console.log(JSON.stringify(e.value,null,"  ")):e instanceof Error?console.error(e):console.info(e)})}]);